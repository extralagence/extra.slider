!function(e){"use strict";var t=e(window);e.fn.extraSlider=function(n){var a=e.extend({auto:!1,autoPauseEvents:"mouseenter",autoResumeEvents:"mouseleave",direction:"x",draggable:!1,ease:Quad.easeOut,keyboard:!1,margin:1,minDrag:0,navigate:!0,navigation:null,paginate:!0,pagination:null,paginateContent:"",speed:.5,startAt:0,type:"slide",waitBeforeMove:!1,onGotoNext:null,onGotoPrev:null,onInit:null,onMoveEnd:null,onMoveStart:null,onPause:null,onResume:null,onUpdate:null,onUpdateClones:null,onDragStart:null,onDragEnd:null},n);return this.each(function(){function n(){var t={};v.each(function(t){e(this).data("index",t),e(this).data("index-absolute",t)}),p.addClass("extra-slider-"+a.type),"slide"===a.type?(p.addClass("extra-slider-direction-"+a.direction),d(),t[a.direction+"Percent"]=100*(M-m),TweenMax.set(h,t)):"fade"===a.type?v.each(function(t){t===M?TweenMax.set(e(this),{autoAlpha:1,zIndex:w+1}):TweenMax.set(e(this),{autoAlpha:0,zIndex:w-t+1})}):"curtain"===a.type?v.each(function(t){t===M?TweenMax.set(e(this),{zIndex:w+1}):TweenMax.set(e(this),{zIndex:w-t+1})}):"custom"===a.type&&v.each(function(t){t===M?TweenMax.set(e(this),{zIndex:w+1}):TweenMax.set(e(this),{zIndex:w-t+1})}),v.not(".extra-slider-clone").first().addClass("extra-slider-first")}function i(){"slide"===a.type&&o(),v.removeClass("extra-slider-active"),v.eq(M+m).addClass("extra-slider-active"),a.onUpdate&&a.onUpdate(v.eq(M+m),M),p.trigger("extra:slider:updated",[v.eq(M+m),M]),x&&x.update()}function o(){if("slide"!==a.type||void 0!==h[0]._gsTransform){var e=!1,t=M,n=0,i=0,o=0,r=0,s={};M>w?(e=!0,M%=w+1):0>M&&(e=!0,M+=w+1),e&&"slide"===a.type&&(n=h[0]._gsTransform[a.direction+"Percent"],i=-(t+m),i*=100,o=i-n,r=-(100*(M+m)+o),s[a.direction+"Percent"]=r,TweenMax.set(h,s))}}function r(e,t){"slide"===a.type&&o(),v.eq(M+m).addClass("extra-slider-active"),!isNaN(a.auto)&&a.auto>0&&u(),a.onMoveEnd&&e>0&&a.onMoveEnd(v.eq(M+m),M),p.trigger("extra:slider:moveEnd",[v.eq(M+m),M])}function s(t,n){if(n=void 0!==n?n:a.speed,a.waitBeforeMove!==!0||!TweenMax.isTweening(h)){var i,s={onComplete:r,onCompleteParams:[n],ease:a.ease},d=null;v.removeClass("extra-slider-active"),C=M,M=t,o(),a.onMoveStart&&n>0&&a.onMoveStart(v.eq(M+m),M,C,t),p.trigger("extra:slider:moveStart",[v.eq(M+m),M,C,t]),a.paginate&&a.pagination.length&&a.pagination.each(function(){e(this).find("a").removeClass("extra-slider-link-active").eq(M).addClass("extra-slider-link-active")}),"slide"===a.type?(i=-(M+m),i=100*i,s[a.direction+"Percent"]=i,TweenMax.to(h,n,s)):"fade"===a.type?(v.each(function(e,t){e===M?v.eq(e).css("zIndex",3):e===C?v.eq(e).css("zIndex",2):v.eq(e).css("zIndex",1)}),s.autoAlpha=1,TweenMax.fromTo(v.eq(M),n,{autoAlpha:0},s)):"curtain"===a.type?(d={},v.each(function(e,t){e===M?v.eq(e).css("zIndex",3):e===C?v.eq(e).css("zIndex",2):v.eq(e).css("zIndex",1)}),t>=C?(s.width="0%",s.left="100%",d.width="100%",d.left="0%"):(s.width="0%",s.left="0%",d.width="100%",d.left="0%"),TweenMax.fromTo(v.eq(M),n,s,d)):"custom"===a.type&&(v.each(function(e,t){e===M?v.eq(e).css("zIndex",3):e===C?v.eq(e).css("zIndex",2):v.eq(e).css("zIndex",1)}),TweenMax.to(h,n,s))}}function d(){v.find(".extra-slider-clone").remove(),v.first().before(v.slice(-a.margin).clone(!0).addClass("extra-slider-clone")),v.last().after(v.slice(0,a.margin).clone(!0).addClass("extra-slider-clone")),v=h.children("li");var t=v.filter(".extra-slider-clone");m=Math.max(0,t.length/2),t.each(function(){var t=e(this),n=t.data("index");t.index()<a.margin?n-=w+1:n+=w+1,t.data("index-absolute",n)}),a.onUpdateClones&&a.onUpdateClones(v.eq(M+m),M),p.trigger("extra:slider:updateClones",[v.eq(M+m),M])}function l(e){a.onGotoNext&&a.onGotoNext(v.eq(M+m),M),p.trigger("extra:slider:onGotoNext",[v.eq(M+m),M]),e=void 0!==e?e:a.speed,s(M+1,e)}function c(e){a.onGotoPrev&&a.onGotoPrev(v.eq(M+m),M),p.trigger("extra:slider:onGotoPrev",[v.eq(M+m),M]),e=void 0!==e?e:a.speed,s(M-1,e)}function u(){g&&g.kill(),g=TweenMax.delayedCall(a.auto,function(){l(),u()})}var g,x,p=e(this),f=e("> .wrapper",this),h=f.find("> ul"),v=h.find("> li"),m=0,q=0,w=v.length-1,M=a.startAt,C=w,T=0,D="pause",y="resume",I=!1;a.draggable&&(a.margin+=1),a.navigate&&(!a.navigation||a.navigation&&a.navigation.length&&a.navigation.length<1)&&(a.navigation=p.find(".navigation")),a.paginate&&(!a.pagination||a.pagination&&a.pagination.length&&a.pagination.length<1)&&(a.pagination=p.find(".pagination")),a.autoPauseEvents&&""!=a.autoPauseEvents&&(D+=" "+a.autoPauseEvents),a.autoResumeEvents&&""!=a.autoResumeEvents&&(y+=" "+a.autoResumeEvents),e(this).on("extra:slider:update",function(){i()}),e(this).on("extra:slider:next",function(e,t){l(t)}),e(this).on("extra:slider:prev",function(e,t){c(t)}),e(this).on("extra:slider:goto",function(e,t,n){n=void 0!==n?n:a.speed,s(t,n)}),e(this).on("extra:slider:pause",function(e,t,n){g.pause()}),e(this).on("extra:slider:resume",function(e,t,n){g.resume()}),a.navigate&&a.navigation.length&&a.navigation.each(function(t,n){var a=e(this);a.find("a").length<2&&(e("<a>",{href:"#","class":"next"}).appendTo(a),e("<a>",{href:"#","class":"prev"}).appendTo(a)),e("a.prev",a).on("click",function(e){e.preventDefault(),c()}),e("a.next",a).on("click",function(e){e.preventDefault(),l()})}),a.paginate&&a.pagination.length&&a.pagination.each(function(){var t=e(this);for(T=0;w>=T;T+=1)e("<a>",{href:"#"}).html(""!==a.paginateContent?a.paginateContent.replace("%d",T+1):T+1).appendTo(t);t.find("a").removeClass("extra-slider-link-active").eq(M).addClass("extra-slider-link-active"),e("a",t).each(function(t,n){var a=e(n);a.click(function(e){e.preventDefault(),s(t)})})}),a.keyboard&&t.on("keydown",function(e){(40===e.which||39===e.which)&&(e.preventDefault(),l()),(38===e.which||37===e.which)&&(e.preventDefault(),c())}),!isNaN(a.auto)&&a.auto>0&&(u(),p.on(D,function(e){I||(e.stopImmediatePropagation(),I=!0,a.onPause&&a.onPause(v.eq(M+m),M),p.trigger("extra:slider:paused",[v.eq(M+m),M]),g.pause())}).on(y,function(e){I&&(I=!1,a.onResume&&a.onResume(v.eq(M+m),M),p.trigger("extra:slider:resumed",[v.eq(M+m),M]),g.resume())})),a.draggable&&"slide"===a.type&&(p.addClass("extra-slider-draggable"),void 0!==Draggable?(Draggable.create(h,{type:a.direction,cursor:"move",lockAxis:!1,throwProps:!1,zIndexBoost:!1,onDragStart:function(){q="x"===a.direction?v.first().width():v.first().height(),a.onDragStart&&a.onDragStart(v.eq(M+m),M),p.trigger("extra:slider:onDragStart",[v.eq(M+m),M])},onDragEnd:function(){var e,t,n=x[a.direction]/q*100-100*(M-m),i=-(n/100-m),o={};e=a.minDrag>0&&Math.abs(x[a.direction])<=a.minDrag?M:i>M?Math.ceil(i):Math.floor(i),t=-(i+m),t=100*t,o[a.direction]=0,o[a.direction+"Percent"]=t,TweenMax.set(h,o),s(e),a.onDragEnd&&a.onDragEnd(v.eq(M+m),M),p.trigger("extra:slider:onDragEnd",[v.eq(M+m),M])}}),x=Draggable.get(h)):console.log("Draggable is not detected. You need to load it to enable drag. More info here : http://www.greensock.com/draggable/")),n(),i(),a.onInit&&a.onInit(v.eq(M+m),M),p.addClass("extra-slider-processed").trigger("extra:slider:init",[v.eq(M+m),M]),s(M,0)}),this}}(jQuery);